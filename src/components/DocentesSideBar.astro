<div
  id="sidebar"
  class="rounded-4xl flex flex-col w-64 p-4 h-full relative transition-all duration-300"
>
  <div class="flex items-center gap-2 mb-10">
    <img loading="lazy" src="/images/itesa-logo.webp" alt="Logo" />
  </div>

  <nav class="h-full">
    <article class="flex flex-col justify-between h-full gap-6">
      <div>
        <h2 class="text-[15px] font-semibold text-zinc-500 uppercase mb-3">
          Módulos
        </h2>
        <ul class="space-y-2">
          <li>
            <button
              data-section="asistencia"
              class="menu-item flex items-center gap-3 w-full text-left px-3 py-2 rounded-lg transition font-bold text-(--color-primary)"
            >
              <span class="text-(--color-base-content)">Asistencia</span>
            </button>
          </li>
          <li>
            <button
              data-section="mis-asistencias"
              class="menu-item flex items-center gap-3 w-full text-left px-3 py-2 rounded-lg transition"
            >
              <span class="text-(--color-base-content)">Mis asistencias</span>
            </button>
          </li>
        </ul>
      </div>

      <div class="relative">
        <ul class="space-y-2">
          <li>
            <button
              data-section="ajustes"
              class="menu-item flex items-center gap-3 w-full text-left px-3 py-2 rounded-lg transition"
            >
              <span class="text-(--color-base-content)">Ajustes de cuenta</span>
            </button>
          </li>

          <!-- BOTÓN DE CERRAR SESIÓN -->
          <li class="relative">
            <button
              id="logoutBtn"
              data-section="logout"
              class="flex items-center gap-3 w-full text-left px-3 py-2 rounded-lg transition hover:bg-white/10"
            >
              <span class="text-(--color-base-content)">Cerrar Sesión</span>
            </button>

            <!-- POPUP DE CONFIRMACIÓN PARA CERRAR SESION -->
            <div
              id="logoutPopup"
              class="hidden absolute bottom-full right-0 mb-2 w-52 p-4 rounded-2xl bg-white/10 border border-gray-400/50 backdrop-blur-2xl text-black"
            >
              <p class="text-sm mb-3 text-center">¿Seguro que desea salir?</p>
              <div class="flex justify-between">
                <button
                  id="confirmLogout"
                  class="px-3 py-1 bg-[#d31039] hover:bg-transparent border hover:border-[#d31039] text-white hover:text-black font-medium rounded-lg text-sm"
                >
                  Sí, salir
                </button>
                <button
                  id="cancelLogout"
                  class="px-3 py-1 hover:bg-[#d31039] bg-transparent border border-[#d31039] hover:text-white text-black font-medium rounded-lg text-sm"
                >
                  Cancelar
                </button>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </article>
  </nav>
</div>

<script>
  const logoutBtn = document.getElementById("logoutBtn");
  const popup = document.getElementById("logoutPopup");
  const cancel = document.getElementById("cancelLogout");
  const confirm = document.getElementById("confirmLogout");

  // Mostrar/ocultar popup
  logoutBtn.addEventListener("click", (e) => {
    e.stopPropagation();
    popup.classList.toggle("hidden");
  });

  // Cancelar cierre
  cancel.addEventListener("click", (e) => {
    e.stopPropagation();
    popup.classList.add("hidden");
  });

  // Confirmar cierre
  confirm.addEventListener("click", () => {
    window.location.href = "/login"; // Redirige o cierra sesión
  });

  // Cerrar popup al hacer click fuera
  document.addEventListener("click", (e) => {
    if (!popup.contains(e.target) && e.target !== logoutBtn) {
      popup.classList.add("hidden");
    }
  });
</script>
